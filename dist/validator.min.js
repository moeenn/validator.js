const validations=new Map([["required",validate__required],["alpha",validate__alpha],["minlength",validate__minlength],["same",validate__same]]);function get_form_fields(e){e=e.querySelectorAll("input:not(input[type='submit'])");if(!e)throw new Error("Provided form does not have any valid input fields");return[...e]}function clear_previous_errors(e){const a=e.querySelectorAll("[data-validator]");a.forEach(e=>e.remove())}function create_error_element(e,a){const t=document.createElement("p");return t.dataset.validator=e,t.classList.add("error"),validations.get(e)&&(t.innerText=a),t}function contains_error(e,a){e=e.querySelectorAll(".error");return 0!==e.length&&-1!==[...e].findIndex(e=>e.dataset.validation_name===a)}function show_error(e,a,t){t=create_error_element(a,t);const r=e.parentElement;r&&(contains_error(r,a)||r.appendChild(t))}function validate__required(e){return 0===e.input.trim().length?{is_valid:!1,message:"Please fill out this field"}:{is_valid:!0}}function validate__alpha(e){const a=new RegExp("^[0-9A-Za-z]*$");e=a.test(e.input);return e?{is_valid:e}:{is_valid:e,message:"Please enter alphabets or numbers only"}}function validate__minlength(e){if(!e.validator_value)throw new Error("No value provided for data-minlength validator");var a=e.input.length>=parseInt(e.validator_value);return a?{is_valid:a}:{is_valid:a,message:`Please enter atleast ${e.validator_value} characters`}}function validate__same(e){var a=`form input[for='${e.validator_value}']`,t=document.querySelector(a);if(!t)throw new Error(`Target element with selector ${a} not found`);return t.value!==e.input?{is_valid:!1,message:`Input value does not match target ${e.validator_value} field`}:{is_valid:!0}}export default function validate(e){const a=get_form_fields(e);clear_previous_errors(e);const o=[];return a.forEach(e=>{var a,t,r,n=e.dataset,i=e.value;for([a,t]of Object.entries(n)){const l=validations.get(a);l||(console.warn(`Unrecognized validator: ${a}`),o.push(!1)),l&&(r=l({input:i,validator_value:t}),o.push(r.is_valid),!r.is_valid&&r.message&&show_error(e,a,r.message))}}),o.every(e=>e)}
